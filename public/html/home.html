<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Welcome</title>
  <link rel="stylesheet" href="/css/style.css">
  
  <!-- Favicon and iOS icons -->
  <link rel="icon" type="image/x-icon" href="/icons/favicon.ico?v=2">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png?v=2">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png?v=2">
  <link rel="icon" type="image/png" sizes="48x48" href="/icons/favicon-48x48.png?v=2">
  <link rel="icon" type="image/png" sizes="64x64" href="/icons/favicon-64x64.png?v=2">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png?v=2">
  <link rel="icon" type="image/png" sizes="128x128" href="/icons/favicon-128x128.png?v=2">
  <link rel="icon" type="image/png" sizes="144x144" href="/icons/favicon-144x144.png?v=2">
  <link rel="icon" type="image/png" sizes="150x150" href="/icons/favicon-150x150.png?v=2">
  <link rel="icon" type="image/png" sizes="152x152" href="/icons/favicon-152x152.png?v=2">
  <link rel="icon" type="image/png" sizes="167x167" href="/icons/favicon-167x167.png?v=2">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/icon-192x192.png?v=2">
  <link rel="icon" type="image/png" sizes="256x256" href="/icons/favicon-256x256.png?v=2">
  <link rel="icon" type="image/png" sizes="384x384" href="/icons/favicon-384x384.png?v=2">
  <link rel="icon" type="image/png" sizes="512x512" href="/icons/icon-512x512.png?v=2">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png?v=2">
  <link rel="manifest" href="/icons/site.webmanifest?v=2">
  
  <!-- iOS home screen meta tags -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Preset App">
  <meta name="theme-color" content="#000000">
</head>
<body>
      <div class="container" id="main-container">
      <div class="welcome-top">
        <div class="summary-stats">
          <div class="stat-item">
            <div class="stat-value" id="take-home">$0</div>
            <div class="stat-label">Take home</div>
          </div>
          <div class="stat-item">
            <div class="stat-value" id="total-revenue">$0</div>
            <div class="stat-label">Total revenue</div>
          </div>
        </div>
        
        <!-- Date Range Selector Panel -->
        <div class="date-range-panel">
          <div class="date-inputs">
            <div class="date-input-group">
              <input type="date" id="start-date" class="date-input">
            </div>
            <div class="date-input-group">
              <input type="date" id="end-date" class="date-input">
            </div>
          </div>
        </div>
      </div>
      
      <!-- Station List Section -->
      <div class="station-section">
        <h2></h2>
        <div id="station-list">
          <!-- Station list will be populated here -->
        </div>
      </div>
      
      <!-- Menu Icon -->
      <div class="menu-icon" id="menu-icon">
        <div class="hamburger-lines">
          <div class="hamburger-line"></div>
          <div class="hamburger-line"></div>
          <div class="hamburger-line"></div>
        </div>
        <div class="menu-x">Ã—</div>
      </div>
      
      <!-- Full Screen Overlay -->
      <div class="menu-overlay" id="menu-overlay">
        <div class="menu-items">
          <a href="/logout" class="menu-item logout">Logout</a>
          <a href="https://battery.cuub.tech/map.html" class="menu-item" target="_blank">Map</a>
          <a href="https://cuub.tech/" class="menu-item" target="_blank">Website</a>
        </div>
      </div>
    </div>
      <script src="/js/deployment-manager.js"></script>
    <script src="/js/home.js"></script>
    <script src="/js/zoom-prevention.js"></script>
    <script>
      // Set data attributes from user info (fetched from /me endpoint)
      fetch('/me', { credentials: 'include' })
        .then(r => {
          if (r.status !== 200) {
            window.location = '/login';
            return null;
          }
          return r.json();
        })
        .then(data => {
          if (data && data.username) {
            const container = document.getElementById('main-container');
            container.setAttribute('data-username', data.username);
            // Get userType from JWT token or default to 'Host'
            // The /me endpoint doesn't return userType, so we'll get it from the token
            // For now, default to 'Host' - home.js will handle the actual user type logic
            container.setAttribute('data-usertype', data.userType || 'Host');
          }
        })
        .catch(err => {
          console.error('Error fetching user info:', err);
          window.location = '/login';
        });
    </script>
</body>
</html> 